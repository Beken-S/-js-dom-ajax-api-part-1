{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const creationZone = document.querySelector('.creation-zone');\nlet moveBoxListener;\nlet dropBoxListener;\n\ncreationZone.addEventListener('pointerdown', createBox);\n\nfunction getNewPosition(element, pageX, pageY, offsetX, offsetY) {\n    const { offsetWidth: elementWidth, offsetHeight: elementHeight } = element;\n    const { scrollWidth, scrollHeight } = document.documentElement;\n    const position = {\n        top: pageY - offsetY,\n        left: pageX - offsetX,\n        bottom: pageY - offsetY + elementHeight,\n        right: pageX - offsetX + elementWidth,\n    };\n\n    if (position.top < 0) {\n        position.top = 0;\n    }\n    if (position.bottom > scrollHeight) {\n        position.top = scrollHeight - elementHeight;\n        position.bottom = position.top + elementHeight;\n    }\n    if (position.left < 0) {\n        position.left = 0;\n    }\n    if (position.right > scrollWidth) {\n        position.left = scrollWidth - elementWidth;\n        position.right = position.left + elementWidth;\n    }\n\n    return position;\n}\n\nfunction moveBox(event) {\n    const { box, offsetX, offsetY } = this;\n    const { pageX, pageY } = event;\n    const { top, left } = getNewPosition(box, pageX, pageY, offsetX, offsetY);\n\n    this.box.style.setProperty('--top', `${top}px`);\n    this.box.style.setProperty('--left', `${left}px`);\n}\n\nfunction isDropZone(element) {\n    return element.nodeName !== 'HTML' && element.classList.contains('drop-zone');\n}\n\nfunction isDropZone2(element) {\n    return element.nodeName !== 'HTML' && element.classList.contains('drop-zone_2');\n}\n\nfunction appendBoxToDropZone(box, dropZone) {\n    box.classList.remove('box_draggable');\n\n    if (isDropZone2(dropZone)) {\n        const { offsetTop: zoneTop, offsetLeft: zoneLeft } = dropZone;\n        const boxTop = parseInt(box.style.getPropertyValue('--top'));\n        const boxLeft = parseInt(box.style.getPropertyValue('--left'));\n\n        box.style.setProperty('--top', `${boxTop - zoneTop}px`);\n        box.style.setProperty('--left', `${boxLeft - zoneLeft}px`);\n        box.classList.add('box_position_absolute');\n    }\n\n    dropZone.append(box);\n    box.hidden = false;\n}\n\nfunction dropBox(event) {\n    document.removeEventListener('pointerup', dropBoxListener);\n    document.removeEventListener('pointermove', moveBoxListener);\n    this.box.hidden = true;\n\n    const { clientX, clientY } = event;\n    const dropZone = document.elementFromPoint(clientX, clientY);\n\n    if (dropZone != null && isDropZone(dropZone)) {\n        appendBoxToDropZone(this.box, dropZone);\n        return;\n    }\n    if (dropZone?.parentNode != null && isDropZone(dropZone.parentNode)) {\n        appendBoxToDropZone(this.box, dropZone.parentNode);\n        return;\n    }\n\n    this.box.remove();\n}\n\nfunction getRandomColor() {\n    return `#${Math.floor(Math.random() * 16777215)\n        .toString(16)\n        .padEnd(6, 0)}`;\n}\n\nfunction createBox(event) {\n    const {\n        target: { offsetTop, offsetLeft },\n        offsetX,\n        offsetY,\n    } = event;\n    const box = document.createElement('div');\n\n    box.classList.add('box', 'box_draggable');\n    box.style.setProperty('--box-color', getRandomColor());\n    box.style.setProperty('--top', `${offsetTop}px`);\n    box.style.setProperty('--left', `${offsetLeft}px`);\n    box.addEventListener('dragstart', () => false);\n    document.body.prepend(box);\n\n    moveBoxListener = { handleEvent: moveBox, box, offsetX, offsetY };\n    dropBoxListener = { handleEvent: dropBox, box };\n    document.addEventListener('pointerup', dropBoxListener);\n    document.addEventListener('pointermove', moveBoxListener);\n}\n"],"names":["$35da740d59af89ba$var$moveBoxListener","$35da740d59af89ba$var$dropBoxListener","$35da740d59af89ba$var$moveBox","event","box","offsetX","offsetY","this","pageX","pageY","top","left","element","offsetWidth","elementWidth","offsetHeight","elementHeight","scrollWidth","scrollHeight","document","documentElement","position","bottom","right","$35da740d59af89ba$var$getNewPosition","style","setProperty","$35da740d59af89ba$var$isDropZone","nodeName","classList","contains","$35da740d59af89ba$var$appendBoxToDropZone","dropZone","remove","offsetTop","zoneTop","offsetLeft","zoneLeft","boxTop","parseInt","getPropertyValue","boxLeft","add","append","hidden","$35da740d59af89ba$var$dropBox","removeEventListener","clientX","clientY","elementFromPoint","parentNode","querySelector","addEventListener","target","createElement","Math","floor","random","toString","padEnd","body","prepend","handleEvent"],"version":3,"file":"index.21b22f15.js.map"}