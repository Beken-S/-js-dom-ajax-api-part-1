{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const creationZone = document.querySelector('.creation-zone');\nlet moveBoxListener;\nlet dropBoxListener;\n\ncreationZone.addEventListener('pointerdown', createBox);\n\nfunction createBox(event) {\n    const {\n        target: { offsetTop, offsetLeft },\n        offsetX,\n        offsetY,\n    } = event;\n    const box = document.createElement('div');\n\n    box.classList.add('box', 'box_draggable');\n    box.style.setProperty('--box-color', getRandomColor());\n    box.style.setProperty('--top', `${offsetTop}px`);\n    box.style.setProperty('--left', `${offsetLeft}px`);\n    box.addEventListener('dragstart', () => false);\n    document.body.prepend(box);\n\n    moveBoxListener = { handleEvent: moveBox, box, offsetX, offsetY };\n    dropBoxListener = { handleEvent: dropBox, box };\n    document.addEventListener('pointerup', dropBoxListener);\n    document.addEventListener('pointermove', moveBoxListener);\n}\n\nfunction dropBox(event) {\n    document.removeEventListener('pointerup', dropBoxListener);\n    document.removeEventListener('pointermove', moveBoxListener);\n    this.box.hidden = true;\n\n    const { clientX, clientY } = event;\n    const dropZone = document.elementFromPoint(clientX, clientY);\n\n    if (dropZone != null && isDropZone(dropZone)) {\n        appendBoxToDropZone(this.box, dropZone);\n        return;\n    }\n    if (dropZone?.parentNode != null && isDropZone(dropZone.parentNode)) {\n        appendBoxToDropZone(this.box, dropZone.parentNode);\n        return;\n    }\n\n    this.box.remove();\n}\n\nfunction moveBox(event) {\n    const { box, offsetX, offsetY } = this;\n    const { pageX, pageY } = event;\n    const { top, left } = getNewPosition(box, pageX, pageY, offsetX, offsetY);\n\n    this.box.style.setProperty('--top', `${top}px`);\n    this.box.style.setProperty('--left', `${left}px`);\n}\n\nfunction isDropZone(element) {\n    return element.nodeName !== 'HTML' && element.classList.contains('drop-zone');\n}\n\nfunction isDropZone2(element) {\n    return element.nodeName !== 'HTML' && element.classList.contains('drop-zone_2');\n}\n\nfunction appendBoxToDropZone(box, dropZone) {\n    box.classList.remove('box_draggable');\n\n    if (isDropZone2(dropZone)) {\n        const { offsetTop: zoneTop, offsetLeft: zoneLeft } = dropZone;\n        const boxTop = parseInt(box.style.getPropertyValue('--top'));\n        const boxLeft = parseInt(box.style.getPropertyValue('--left'));\n\n        box.style.setProperty('--top', `${boxTop - zoneTop}px`);\n        box.style.setProperty('--left', `${boxLeft - zoneLeft}px`);\n        box.classList.add('box_position_absolute');\n    }\n\n    dropZone.append(box);\n    box.hidden = false;\n}\n\nfunction getNewPosition(element, pageX, pageY, offsetX, offsetY) {\n    const { offsetWidth: elementWidth, offsetHeight: elementHeight } = element;\n    const { scrollWidth, scrollHeight } = document.documentElement;\n    const position = {\n        top: pageY - offsetY,\n        left: pageX - offsetX,\n        bottom: pageY - offsetY + elementHeight,\n        right: pageX - offsetX + elementWidth,\n    };\n\n    if (position.top < 0) {\n        position.top = 0;\n    }\n    if (position.bottom > scrollHeight) {\n        position.top = scrollHeight - elementHeight;\n        position.bottom = position.top + elementHeight;\n    }\n    if (position.left < 0) {\n        position.left = 0;\n    }\n    if (position.right > scrollWidth) {\n        position.left = scrollWidth - elementWidth;\n        position.right = position.left + elementWidth;\n    }\n\n    return position;\n}\n\nfunction getRandomColor() {\n    return `#${Math.floor(Math.random() * 16777215)\n        .toString(16)\n        .padEnd(6, 0)}`;\n}\n"],"names":["$35da740d59af89ba$var$moveBoxListener","$35da740d59af89ba$var$dropBoxListener","$35da740d59af89ba$var$dropBox","event","document","removeEventListener","this","box","hidden","clientX","clientY","dropZone","elementFromPoint","$35da740d59af89ba$var$isDropZone","$35da740d59af89ba$var$appendBoxToDropZone","parentNode","remove","$35da740d59af89ba$var$moveBox","offsetX","offsetY","pageX","pageY","top","left","element","offsetWidth","elementWidth","offsetHeight","elementHeight","scrollWidth","scrollHeight","documentElement","position","bottom","right","$35da740d59af89ba$var$getNewPosition","style","setProperty","nodeName","classList","contains","offsetTop","zoneTop","offsetLeft","zoneLeft","boxTop","parseInt","getPropertyValue","boxLeft","add","append","querySelector","addEventListener","target","createElement","Math","floor","random","toString","padEnd","body","prepend","handleEvent"],"version":3,"file":"index.abfe0219.js.map"}